{"version":3,"file":"static/js/785.57108f9e.chunk.js","mappings":"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","sources":["pages/CreateProfile/index.js"],"sourcesContent":["import React, { useEffect, useMemo } from \"react\";\r\nimport { useState } from \"react\";\r\nimport {\r\n  Back,\r\n  Button,\r\n  ButtonBar,\r\n  CheckBox,\r\n  Container,\r\n  InputGroup,\r\n  Label,\r\n  Page,\r\n  ProfileImage,\r\n  Row,\r\n  Title,\r\n} from \"../../components/common\";\r\nimport Select from \"react-select\";\r\nimport { components } from \"react-select\";\r\nimport { useDispatch, useSelector } from \"react-redux\";\r\nimport { getUserProfile } from \"../../api\";\r\nimport putUserProfile from \"../../api/putUserProfile\";\r\nimport { useNavigate } from \"react-router-dom\";\r\n// import getCategory from \"../../api/getCategory\";\r\nimport { login, logout } from \"../../store/actions/auth\";\r\nimport {\r\n  useUpdateProfileMutation,\r\n  useGetCountriesQuery,\r\n} from \"../../store/slice/api\";\r\nimport LoadingSpinner from \"../../components/common/LoadingSpinner\";\r\n\r\nconst Option = (props) => {\r\n  return (\r\n    <div>\r\n      <components.Option {...props}>\r\n        <CheckBox\r\n          text={props.label}\r\n          onChange={() => null}\r\n          checked={props.isSelected}\r\n        />\r\n      </components.Option>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default function CreateProfile() {\r\n  const navigate = useNavigate();\r\n  const dispatch = useDispatch();\r\n  const token = useSelector((state) => state.reducer.auth.token);\r\n  const [userID, setuserID] = useState(\"\");\r\n  const [phoneNumber, setphoneNumber] = useState(\"\");\r\n  const [imagePreview, setImagePreview] = useState(null);\r\n  const [imageFile, setImageFile] = useState(null);\r\n  const [fullName, setFullName] = useState(\"\");\r\n  const [userName, setUserName] = useState(\"\");\r\n  const [location, setLocation] = useState(\"\");\r\n  // const [category, setCategory] = useState(\"\")\r\n  // const [categoryoptions, setcategoryoptions] = useState([])\r\n  const [verificationPeriod, setVerificationPeriod] = useState(\"\");\r\n  const [upcomingdata, setupcomingdata] = useState([]);\r\n  const [country, setCountry] = useState(\"\");\r\n\r\n  const [updateProfile] = useUpdateProfileMutation();\r\n  const {\r\n    data: countries,\r\n    isLoading: isCountriesLoading,\r\n    isSuccess: countriesSuccessfullyLoaded,\r\n  } = useGetCountriesQuery();\r\n  const verificationperiodoptions = [\r\n    { value: \"One Week\", label: \"One Week\", color: \"#00B8D9\", isFixed: true },\r\n    { value: \"Two Week\", label: \"Two Week\", color: \"#0052CC\", isFixed: true },\r\n    { value: \"One Month\", label: \"One Month\", color: \"#5243AA\", isFixed: true },\r\n  ];\r\n\r\n  const customStyles = {\r\n    control: (provided, state) => ({\r\n      ...provided,\r\n      background: \"#fff\",\r\n      borderRadius: \"10px\",\r\n      borderColor: \"#292D3233\",\r\n      height: \"80px\",\r\n      padding: \"0px 6px\",\r\n      fontfamily: \"TT Commons\",\r\n      fontSize: \"16px\",\r\n      lineHeight: \"26px\",\r\n      boxShadow: state.isFocused ? null : null,\r\n      \"&:hover\": {\r\n        borderColor: \"#00A652\",\r\n      },\r\n    }),\r\n    indicatorSeparator: (state) => ({\r\n      display: \"none\",\r\n    }),\r\n    option: (provided, state) => ({\r\n      ...provided,\r\n      backgroundColor: \"white\",\r\n      color: \"black\",\r\n      \"&:hover\": {\r\n        backgroundColor: \"#00A652\",\r\n      },\r\n    }),\r\n    placeholder: (defaultStyles) => ({\r\n      ...defaultStyles,\r\n      fontFamily: \"TT Commons\",\r\n      fontSize: \"18px\",\r\n    }),\r\n  };\r\n  useEffect(() => {\r\n    getUserProfile(token).then((response) => {\r\n      console.log(response.results);\r\n      setupcomingdata(response.results);\r\n      response.results.map((e) => {\r\n        setImageFile(e.profile_picture);\r\n        setFullName(e.name);\r\n        setuserID(e.id);\r\n        setphoneNumber(e.phone_number);\r\n        setUserName(e.email);\r\n        // setCategory(e.category?.length ? { value: e.category[0].id, label: e.category[0].name } : null)\r\n        setVerificationPeriod(\r\n          e.verification_period\r\n            ? { value: e.verification_period, label: e.verification_period }\r\n            : null\r\n        );\r\n      });\r\n    });\r\n    // getCategory(token).then((response) => {\r\n    //   setcategoryoptions(response.results)\r\n    // })\r\n  }, []);\r\n\r\n  const handleImage = (e) => {\r\n    const file = e.target.files[0];\r\n    // console.log('file...', file)\r\n    if (file.type.split(\"/\")[0] !== \"image\")\r\n      return alert(\"This file type is not supported\");\r\n    setImagePreview(URL.createObjectURL(file));\r\n    setImageFile(file);\r\n  };\r\n\r\n  const loggedIn = useSelector((state) => state.reducer.auth.loggedIn);\r\n  useEffect(() => {\r\n    if (loggedIn && imageFile && fullName && verificationPeriod) {\r\n      navigate(\"/home\");\r\n    }\r\n  }, [loggedIn, navigate]);\r\n\r\n  const countriesOptions = useMemo(() => {\r\n    if (countries) {\r\n      console.log(\"country\", countries);\r\n      return countries.data.map((country) => ({\r\n        value: country.country,\r\n        label: country.country,\r\n      }));\r\n    }\r\n  }, [countries]);\r\n\r\n  const handleLogout = () => {\r\n    dispatch(logout());\r\n    navigate(\"/\");\r\n  };\r\n\r\n  const onSubmit = (e) => {\r\n    e.preventDefault();\r\n    if (!fullName || !verificationPeriod)\r\n      return alert(\"Please fill all fields.\");\r\n    console.log(\r\n      imageFile,\r\n      fullName,\r\n      userName,\r\n      location,\r\n      // category,\r\n      verificationPeriod\r\n    );\r\n    const formdata = {\r\n      id: userID,\r\n      user_data: JSON.stringify({\r\n        name: fullName,\r\n        email: userName,\r\n        location: country,\r\n        verification_period: verificationPeriod?.value,\r\n      }),\r\n    };\r\n    if (imageFile) {\r\n      formdata[\"profile_picture\"] = imageFile;\r\n    }\r\n    updateProfile(formdata)\r\n      .then((response) => {\r\n        dispatch(\r\n          login({\r\n            user: {\r\n              response,\r\n              token: token,\r\n            },\r\n          })\r\n        );\r\n        navigate(\"/home\");\r\n      })\r\n      .catch((err) => {\r\n        console.log(err);\r\n        window.alert(JSON.stringify(err));\r\n      });\r\n  };\r\n  if (!countriesOptions) {\r\n    return <LoadingSpinner />;\r\n  }\r\n\r\n  return (\r\n    <Page>\r\n      <Container\r\n        width=\"727px\"\r\n        margin=\"100px\"\r\n        padding=\"70px\"\r\n        borderRadius=\"20px\"\r\n      >\r\n        <Back onClick={handleLogout} />\r\n        <Title>Create Profile</Title>\r\n\r\n        <form onSubmit={onSubmit}>\r\n          <ProfileImage\r\n            imagePreview={imagePreview ? imagePreview : imageFile}\r\n            handleImage={handleImage}\r\n          />\r\n          {upcomingdata.map((item) => {\r\n            return (\r\n              <>\r\n                <InputGroup\r\n                  label=\"Full Name\"\r\n                  placeholder=\"Enter your full name\"\r\n                  value={fullName}\r\n                  onChange={(e) => setFullName(e.target.value)}\r\n                />\r\n                <InputGroup\r\n                  disabled=\"true\"\r\n                  label=\"Email\"\r\n                  placeholder=\"Enter your email\"\r\n                  value={item.email}\r\n                  onChange={(e) => setUserName(e.target.value)}\r\n                />\r\n                {countriesOptions && (\r\n                  <>\r\n                    <Row justifyContent=\"space-between\">\r\n                      <Label>Location</Label>\r\n                    </Row>\r\n                    <Select\r\n                      menuPosition=\"left\"\r\n                      placeholder=\"Select the location\"\r\n                      value={countriesOptions.find(\r\n                        (el) => el.value === country\r\n                      )}\r\n                      styles={customStyles}\r\n                      onChange={(e) => {\r\n                        setCountry(e.value);\r\n                      }}\r\n                      options={countriesOptions}\r\n                      closeMenuOnSelect={false}\r\n                      hideSelectedOptions={false}\r\n                      components={{ Option }}\r\n                    />\r\n                  </>\r\n                )}\r\n                {/* <Row justifyContent=\"space-between\">\r\n                  <Label>Category</Label>\r\n                </Row>\r\n                <Select\r\n                  menuPosition=\"left\"\r\n                  placeholder='Select the category'\r\n                  value={category}\r\n                  styles={customStyles}\r\n                  onChange={(e) => {\r\n                    setCategory(e)\r\n                  }}\r\n                  options={categoryoptions.map((cat, index) => {\r\n                    return ({\r\n                      label: cat.name,\r\n                      value: cat.id,\r\n                      key: index\r\n                    })\r\n                  })}\r\n                  closeMenuOnSelect={false}\r\n                  hideSelectedOptions={false}\r\n                  components={{\r\n                    Option\r\n                  }}\r\n                /> */}\r\n                <div\r\n                  style={{\r\n                    display: \"block\",\r\n                    marginTop: \"1rem\",\r\n                    marginBottom: \"1rem\",\r\n                  }}\r\n                >\r\n                  <Row justifyContent=\"space-between\">\r\n                    <Label>Verification Period</Label>\r\n                  </Row>\r\n                  <Select\r\n                    placeholder=\"Select the verification period\"\r\n                    value={verificationPeriod}\r\n                    styles={customStyles}\r\n                    onChange={(e) => {\r\n                      console.log(e);\r\n                      setVerificationPeriod(e);\r\n                    }}\r\n                    options={verificationperiodoptions}\r\n                    closeMenuOnSelect={false}\r\n                    hideSelectedOptions={false}\r\n                    components={{\r\n                      Option,\r\n                    }}\r\n                  />\r\n                </div>\r\n                <ButtonBar>\r\n                  <Button color=\"#00A652\" type=\"submit\">\r\n                    Save\r\n                  </Button>\r\n                </ButtonBar>\r\n              </>\r\n            );\r\n          })}\r\n        </form>\r\n      </Container>\r\n    </Page>\r\n  );\r\n}\r\n"],"names":["Option","props","c","text","label","onChange","checked","isSelected","CreateProfile","navigate","useNavigate","dispatch","useDispatch","token","useSelector","state","reducer","auth","useState","userID","setuserID","setphoneNumber","imagePreview","setImagePreview","imageFile","setImageFile","fullName","setFullName","userName","setUserName","location","verificationPeriod","setVerificationPeriod","upcomingdata","setupcomingdata","country","setCountry","useUpdateProfileMutation","updateProfile","useGetCountriesQuery","countries","data","verificationperiodoptions","isLoading","isSuccess","value","color","isFixed","customStyles","control","provided","background","borderRadius","borderColor","height","padding","fontfamily","fontSize","lineHeight","boxShadow","isFocused","indicatorSeparator","display","option","backgroundColor","placeholder","defaultStyles","fontFamily","useEffect","getUserProfile","then","response","console","log","results","map","e","profile_picture","name","id","phone_number","email","verification_period","loggedIn","countriesOptions","useMemo","width","margin","onClick","logout","onSubmit","preventDefault","alert","formdata","user_data","JSON","stringify","login","user","catch","err","window","handleImage","file","target","files","type","split","URL","createObjectURL","item","disabled","justifyContent","menuPosition","find","el","styles","options","closeMenuOnSelect","hideSelectedOptions","components","style","marginTop","marginBottom","LoadingSpinner"],"sourceRoot":""}